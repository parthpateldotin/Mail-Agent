<!DOCTYPE html>
<html>
<head>
  <style>
    body {
      font-family: Arial, sans-serif;
      line-height: 1.6;
      color: #333;
      max-width: 800px;
      margin: 0 auto;
      padding: 20px;
    }
    .header {
      background-color: #673ab7;
      color: white;
      padding: 20px;
      border-radius: 5px;
      margin-bottom: 30px;
    }
    .section {
      background-color: #f9f9f9;
      padding: 20px;
      border-radius: 5px;
      border: 1px solid #ddd;
      margin-bottom: 20px;
    }
    .metric {
      display: flex;
      justify-content: space-between;
      padding: 10px;
      border-bottom: 1px solid #eee;
    }
    .metric:last-child {
      border-bottom: none;
    }
    .trend-up {
      color: #0f9d58;
    }
    .trend-down {
      color: #db4437;
    }
    .trend-stable {
      color: #4285f4;
    }
    .chart {
      width: 100%;
      max-width: 600px;
      margin: 20px auto;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      margin: 20px 0;
    }
    th, td {
      padding: 12px;
      text-align: left;
      border-bottom: 1px solid #ddd;
    }
    th {
      background-color: #f5f5f5;
    }
    .footer {
      margin-top: 30px;
      font-size: 12px;
      color: #666;
      text-align: center;
    }
  </style>
</head>
<body>
  <div class="header">
    <h1>Weekly System Report</h1>
    <p>Period: {{weekStart}} - {{weekEnd}}</p>
  </div>

  <div class="section">
    <h2>Performance Overview</h2>
    <div class="metric">
      <span>Average Response Time:</span>
      <span>{{data.performance.responseTime.avg}}ms 
        <span class="trend-{{data.performance.responseTime.trend}}">({{data.performance.responseTime.change}}%)</span>
      </span>
    </div>
    <div class="metric">
      <span>Total Requests:</span>
      <span>{{data.performance.requests.total}}
        <span class="trend-{{data.performance.requests.trend}}">({{data.performance.requests.change}}%)</span>
      </span>
    </div>
    <div class="metric">
      <span>Error Rate:</span>
      <span>{{data.performance.errorRate.avg}}%
        <span class="trend-{{data.performance.errorRate.trend}}">({{data.performance.errorRate.change}}%)</span>
      </span>
    </div>
  </div>

  <div class="section">
    <h2>Resource Utilization</h2>
    <div class="metric">
      <span>Average CPU Usage:</span>
      <span>{{data.resources.cpu.avg}}%
        <span class="trend-{{data.resources.cpu.trend}}">({{data.resources.cpu.change}}%)</span>
      </span>
    </div>
    <div class="metric">
      <span>Average Memory Usage:</span>
      <span>{{data.resources.memory.avg}}%
        <span class="trend-{{data.resources.memory.trend}}">({{data.resources.memory.change}}%)</span>
      </span>
    </div>
    <div class="metric">
      <span>Disk Usage:</span>
      <span>{{data.resources.disk.used}}/{{data.resources.disk.total}} GB
        <span class="trend-{{data.resources.disk.trend}}">({{data.resources.disk.change}}%)</span>
      </span>
    </div>
  </div>

  <div class="section">
    <h2>Alert Summary</h2>
    <table>
      <tr>
        <th>Severity</th>
        <th>Count</th>
        <th>Change</th>
      </tr>
      <tr>
        <td>Critical</td>
        <td>{{data.alerts.critical.count}}</td>
        <td class="trend-{{data.alerts.critical.trend}}">{{data.alerts.critical.change}}%</td>
      </tr>
      <tr>
        <td>Warning</td>
        <td>{{data.alerts.warning.count}}</td>
        <td class="trend-{{data.alerts.warning.trend}}">{{data.alerts.warning.change}}%</td>
      </tr>
      <tr>
        <td>Info</td>
        <td>{{data.alerts.info.count}}</td>
        <td class="trend-{{data.alerts.info.trend}}">{{data.alerts.info.change}}%</td>
      </tr>
    </table>
  </div>

  <div class="section">
    <h2>Top Issues</h2>
    <table>
      <tr>
        <th>Issue</th>
        <th>Occurrences</th>
        <th>Impact</th>
      </tr>
      {{#each data.topIssues}}
      <tr>
        <td>{{this.description}}</td>
        <td>{{this.count}}</td>
        <td>{{this.impact}}</td>
      </tr>
      {{/each}}
    </table>
  </div>

  {{#if data.recommendations}}
  <div class="section">
    <h2>Recommendations</h2>
    <ul>
      {{#each data.recommendations}}
      <li>{{this}}</li>
      {{/each}}
    </ul>
  </div>
  {{/if}}

  <div class="footer">
    <p>This is an automated weekly report from your system monitoring service. For detailed analytics and insights, please visit your dashboard.</p>
  </div>
</body>
</html> 